!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/coercion"),require("@angular/cdk/platform"),require("@angular/core"),require("@angular/forms"),require("@angular/material/core"),require("@angular/material/form-field"),require("rxjs"),require("@angular/common"),require("@angular/material/button"),require("@angular/material/icon"),require("@angular/material/input")):"function"==typeof define&&define.amd?define("@angular-material-components/file-input",["exports","@angular/cdk/coercion","@angular/cdk/platform","@angular/core","@angular/forms","@angular/material/core","@angular/material/form-field","rxjs","@angular/common","@angular/material/button","@angular/material/icon","@angular/material/input"],t):t(((e=e||self)["angular-material-components"]=e["angular-material-components"]||{},e["angular-material-components"]["file-input"]={}),e.ng.cdk.coercion,e.ng.cdk.platform,e.ng.core,e.ng.forms,e.ng.material.core,e.ng.material.formField,e.rxjs,e.ng.common,e.ng.material.button,e.ng.material.icon,e.ng.material.input)}(this,(function(e,t,n,r,i,o,a,l,u,p,c,f){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};Object.create;Object.create;var d=0,m=function(e,t,n,r){this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=n,this.ngControl=r};var g=o.mixinErrorState(m),h=function(){};h.decorators=[{type:r.Directive,args:[{selector:"[ngxMatFileInputIcon]"}]}];var y=function(e){function n(t,n,r,i,o,a,u){var p=e.call(this,u,o,a,i)||this;return p._elementRef=t,p._platform=n,p._cd=r,p.ngControl=i,p.color="primary",p.fileNames=null,p._uid="ngx-mat-fileinput-"+d++,p.stateChanges=new l.Subject,p.focused=!1,p.controlType="ngx-mat-file-input",p.autofilled=!1,p._onTouched=function(){},p._onChange=function(){},p._disabled=!1,p._multiple=!1,p.placeholder="Choose a file",p.separator=",",p._required=!1,p._readonly=!0,p.id=p.id,p.ngControl&&(p.ngControl.valueAccessor=p),p}return function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(n,e),Object.defineProperty(n.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(e){this._disabled=t.coerceBooleanProperty(e),this.focused&&(this.focused=!1,this.stateChanges.next())},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e||this._uid},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"multiple",{get:function(){return this._multiple},set:function(e){this._multiple=t.coerceBooleanProperty(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"required",{get:function(){return this._required},set:function(e){this._required=t.coerceBooleanProperty(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"readonly",{get:function(){return this._readonly},set:function(e){this._readonly=t.coerceBooleanProperty(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"accept",{get:function(){return this._accept},set:function(e){this._accept=e},enumerable:!1,configurable:!0}),n.prototype.ngOnChanges=function(){this.stateChanges.next()},n.prototype.ngOnDestroy=function(){this.stateChanges.complete()},n.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState()},n.prototype.writeValue=function(e){this._updateInputValue(e)},n.prototype.registerOnChange=function(e){this._onChange=e},n.prototype.registerOnTouched=function(e){this._onTouched=e},n.prototype.setDisabledState=function(e){this.disabled=e,this.stateChanges.next()},n.prototype.focus=function(e){this._inputValueRef.nativeElement.focus(e)},n.prototype._focusChanged=function(e){e===this.focused||this.readonly&&e||(this.focused=e,this.stateChanges.next())},n.prototype._markAsTouched=function(){this._onTouched(),this._cd.markForCheck(),this.stateChanges.next()},n.prototype._isBadInput=function(){var e=this._inputValueRef.nativeElement.validity;return e&&e.badInput},Object.defineProperty(n.prototype,"empty",{get:function(){return!this._inputValueRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty},enumerable:!1,configurable:!0}),n.prototype.setDescribedByIds=function(e){this._ariaDescribedby=e.join(" ")},n.prototype.openFilePicker=function(e){this._inputFileRef.nativeElement.click(),e&&(e.preventDefault(),e.stopPropagation()),this._markAsTouched()},n.prototype.handleFiles=function(e){if(e.length>0){for(var t=new Array,n=0;n<e.length;n++)t.push(e.item(n));this._updateInputValue(t),this._resetInputFile(),this._onChange(this.multiple?t:t[0])}},n.prototype.onContainerClick=function(e){},n.prototype._resetInputFile=function(){this._inputFileRef.nativeElement.value=""},n.prototype._updateInputValue=function(e){var t=null;e&&(t=Array.isArray(e)?this._multiple?e.map((function(e){return e.name})).join(this.separator):e[0].name:null!=e.name?e.name:null),this._inputValueRef.nativeElement.value=t},n}(g);y.decorators=[{type:r.Component,args:[{selector:"ngx-mat-file-input",template:'<input #inputValue autocomplete="off" class="mat-input-element mat-form-field-autofill-control" [attr.id]=\'id\'\r\n  [attr.placeholder]=\'placeholder\' [disabled]=\'disabled\' [required]=\'required\' [attr.readonly]=\'readonly || null\'\r\n  [attr.aria-describedby]=\'_ariaDescribedby || null\' [attr.aria-invalid]=\'errorState\'\r\n  [attr.aria-required]=\'required.toString()\'>\r\n<div class="mat-form-field-suffix">\r\n  <button matSuffix mat-icon-button [color]="color" class="button-browse"  (click)="openFilePicker($event)" type="button"\r\n   [disabled]="disabled">\r\n    <mat-icon *ngIf="!_customIcon" class="ngx-mat-file-input--default-icon">attach_file</mat-icon>\r\n    <ng-content select="[ngxMatFileInputIcon]"></ng-content>\r\n  </button>\r\n</div>\r\n<input type="file" #inputFile (change)="handleFiles($event.target.files)" class="input-file"\r\n  [multiple]="multiple" [accept]="accept">',encapsulation:r.ViewEncapsulation.None,host:{class:"ngx-mat-file-input"},providers:[{provide:a.MatFormFieldControl,useExisting:r.forwardRef((function(){return y}))}],exportAs:"ngx-mat-file-input",styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .ngx-mat-file-input--default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .ngx-mat-file-input--default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .ngx-mat-file-input--default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .ngx-mat-file-input--default-icon{display:block;height:1.5em;width:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .ngx-mat-file-input--default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .ngx-mat-file-input--default-icon{margin:auto}.ngx-mat-file-input{align-items:center;display:flex;height:18px;line-height:18px}.ngx-mat-file-input .input-file{display:block;height:0;visibility:hidden;width:0}"]}]}],y.ctorParameters=function(){return[{type:r.ElementRef},{type:n.Platform},{type:r.ChangeDetectorRef},{type:i.NgControl,decorators:[{type:r.Optional},{type:r.Self}]},{type:i.NgForm,decorators:[{type:r.Optional}]},{type:i.FormGroupDirective,decorators:[{type:r.Optional}]},{type:o.ErrorStateMatcher}]},y.propDecorators={_inputFileRef:[{type:r.ViewChild,args:["inputFile",{static:!0}]}],_inputValueRef:[{type:r.ViewChild,args:["inputValue",{static:!0}]}],_customIcon:[{type:r.ContentChild,args:[h]}],color:[{type:r.Input}],disabled:[{type:r.Input}],id:[{type:r.Input}],multiple:[{type:r.Input}],placeholder:[{type:r.Input}],separator:[{type:r.Input}],required:[{type:r.Input}],errorStateMatcher:[{type:r.Input}],value:[{type:r.Input}],readonly:[{type:r.Input}],accept:[{type:r.Input}]};var b=function(){};b.decorators=[{type:r.NgModule,args:[{declarations:[y,h],imports:[u.CommonModule,p.MatButtonModule,c.MatIconModule,a.MatFormFieldModule,f.MatInputModule],exports:[y,h]}]}],e.AcceptValidator=function(e){return function(t){if(!e)throw"AcceptValidator: allowable type of file can not be empty";return null==t.value||e.includes(t.value.type)?null:{accept:!0}}},e.MaxSizeValidator=function(e){return function(t){if(e=Number(e),isNaN(e))throw"MaxSizeValidator: max of size of file is invalid";if(!t.value)return null;var n=t.value;if(Array.isArray(t.value)||(n=[t.value]),!n.length)return null;return n.map((function(e){return e.size})).reduce((function(e,t){return e+t}))>e?{maxSize:!0}:null}},e.NgxMatFileInputComponent=y,e.NgxMatFileInputIcon=h,e.NgxMatFileInputModule=b,e.calculFileSize=function(e){return e<1024?e+"bytes":e>=1024&&e<1048576?(e/1024).toFixed(1)+"KB":e>=1048576?(e/1048576).toFixed(1)+"MB":void 0},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-material-components-file-input.umd.min.js.map